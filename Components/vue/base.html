<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue | 芒梨博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/studyblog.github.io/favicon.ico">
    <meta name="description" content="个人博客">
    
    <link rel="preload" href="/studyblog.github.io/assets/css/0.styles.909ac081.css" as="style"><link rel="preload" href="/studyblog.github.io/assets/js/app.f0e12a78.js" as="script"><link rel="preload" href="/studyblog.github.io/assets/js/40.d9be3eca.js" as="script"><link rel="preload" href="/studyblog.github.io/assets/js/46.ca6509d7.js" as="script"><link rel="prefetch" href="/studyblog.github.io/assets/js/1.b02d74d2.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/10.b17b1454.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/100.9ccb8ff5.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/101.9a6065c9.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/102.d9b0dc75.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/103.b59a959f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/104.3c41d096.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/105.39d6a1bf.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/106.de530c1f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/107.b911e829.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/108.7ad6bf33.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/109.74425d8f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/11.fc60087f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/110.3098ee2d.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/111.0bf05e2b.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/112.5062fc88.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/113.9466436f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/114.1a39ff02.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/115.26d62c9c.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/116.b16806ce.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/117.3426e142.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/118.8dbabedb.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/119.cc748d1d.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/12.a8424531.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/120.06d704a0.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/121.9507695f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/122.f8191ff1.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/13.8881e980.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/14.86498cbd.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/15.ff515cbc.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/16.312f25fa.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/17.ea47a715.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/18.4ac56ec1.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/19.25072e28.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/2.c4005836.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/20.6ffca9bc.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/21.1446824b.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/22.2427ee9c.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/23.71623e8f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/24.ca6937ce.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/25.3cf22008.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/26.e9f5d451.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/27.997f2ec1.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/28.382de87b.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/29.c4a93538.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/3.85361af2.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/30.3186d405.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/31.d31716d8.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/32.13b38d37.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/33.8230cc92.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/34.bcfb09e0.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/35.bd476159.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/36.2ac586fb.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/37.33fe0a40.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/38.15297a4b.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/4.68d54ffc.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/41.ee0d6da9.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/42.98037d28.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/43.5eb93b80.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/44.ebfddeec.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/45.07f22e5d.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/47.167cc8c7.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/48.e49b0bc6.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/49.359dcda5.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/5.f9275404.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/50.40bc046b.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/51.09112a23.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/52.5b9f0a6c.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/53.10084720.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/54.414f0929.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/55.1bce53a8.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/56.8fc2e531.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/57.75ab8c94.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/58.59738ca1.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/59.abf7cbaa.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/6.1a0c9509.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/60.3ef9fcf3.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/61.f5a3b2eb.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/62.83dcf1ab.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/63.9f6d4271.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/64.84fcc949.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/65.9442cadb.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/66.8fa85f24.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/67.a1526bfb.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/68.036f590a.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/69.b93c3d06.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/7.a37045f7.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/70.a6651988.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/71.c79e8f63.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/72.3a0a349f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/73.a434f014.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/74.de69bf46.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/75.5b93594a.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/76.86bec0df.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/77.e9eadbc7.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/78.c19452de.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/79.9bdfc593.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/8.e8a007a5.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/80.e41b535e.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/81.738256da.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/82.2f67a9f7.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/83.f05575bc.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/84.594d6562.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/85.89a0f5f1.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/86.dd808c0c.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/87.26c2dbf8.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/88.0f265bcc.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/89.8b453b75.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/9.094050ec.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/90.d840a8c6.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/91.ea9fe229.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/92.099100b7.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/93.d4c09ee5.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/94.2fa1d1a6.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/95.97dd1ef0.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/96.a583d717.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/97.ed8eba3f.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/98.c446bc32.js"><link rel="prefetch" href="/studyblog.github.io/assets/js/99.487f378e.js">
    <link rel="stylesheet" href="/studyblog.github.io/assets/css/0.styles.909ac081.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/studyblog.github.io/" class="home-link router-link-active"><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201911%2F30%2F20191130103938_uNhF5.thumb.700_0.jpeg&amp;refer=http%3A%2F%2Fc-ssl.duitang.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1664606884&amp;t=978883c3b180812cc76c793f1f6a6b92" alt="芒梨博客" class="logo"> <span class="site-name can-hide">芒梨博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/studyblog.github.io/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/Echarts/echarts.html" class="nav-link">
  数据可视化
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/javascript/base.html" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/vue/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/CpNet/base.html" class="nav-link">
  计算机网络知识
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试总结" class="dropdown-title"><span class="title">面试总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试总结" class="mobile-dropdown-title"><span class="title">面试总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/studyblog.github.io/Components/md_interview/interview.html" class="nav-link">
  常见总结
</a></li><li class="dropdown-item"><!----> <a href="/studyblog.github.io/Components/md_interview/Vue.html" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ThreeJS" class="dropdown-title"><span class="title">ThreeJS</span> <span class="arrow down"></span></button> <button type="button" aria-label="ThreeJS" class="mobile-dropdown-title"><span class="title">ThreeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/studyblog.github.io/Components/ThreeJS/Lamborghini.html" class="nav-link">
  中文
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/karry-liao?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/studyblog.github.io/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/Echarts/echarts.html" class="nav-link">
  数据可视化
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/javascript/base.html" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/vue/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue
</a></div><div class="nav-item"><a href="/studyblog.github.io/Components/CpNet/base.html" class="nav-link">
  计算机网络知识
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试总结" class="dropdown-title"><span class="title">面试总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试总结" class="mobile-dropdown-title"><span class="title">面试总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/studyblog.github.io/Components/md_interview/interview.html" class="nav-link">
  常见总结
</a></li><li class="dropdown-item"><!----> <a href="/studyblog.github.io/Components/md_interview/Vue.html" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ThreeJS" class="dropdown-title"><span class="title">ThreeJS</span> <span class="arrow down"></span></button> <button type="button" aria-label="ThreeJS" class="mobile-dropdown-title"><span class="title">ThreeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/studyblog.github.io/Components/ThreeJS/Lamborghini.html" class="nav-link">
  中文
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/karry-liao?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/studyblog.github.io/Components/base/introduce.html" class="sidebar-link">介绍</a></li><li><a href="/studyblog.github.io/Components/base/Reg.html" class="sidebar-link">正则表达式</a></li><li><a href="/studyblog.github.io/Components/base/Reg.html" class="sidebar-link">Map和Set的区别</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML&amp;CSS篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/studyblog.github.io/Components/htmlcss/HtmlsCSS.html" class="sidebar-link">HTML&amp;CSS</a></li><li><a href="/studyblog.github.io/Components/htmlcss/AutoResize.html" class="sidebar-link">响应式布局方案</a></li><li><a href="/studyblog.github.io/Components/htmlcss/CSS.html" class="sidebar-link">CSS样式</a></li><li><a href="/studyblog.github.io/Components/htmlcss/Selector.html" class="sidebar-link">CSS选择器</a></li><li><a href="/studyblog.github.io/Components/htmlcss/Flex.html" class="sidebar-link">Flex布局</a></li><li><a href="/studyblog.github.io/Components/htmlcss/animation.html" class="sidebar-link">前端动画</a></li><li><a href="/studyblog.github.io/Components/htmlcss/FontCss.html" class="sidebar-link">花式字体</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue组件篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/studyblog.github.io/Components/static/IconStyle.html" class="sidebar-link">IconStyle</a></li><li><a href="/studyblog.github.io/Components/static/GuaguaLe.html" class="sidebar-link">canvas之刮刮乐</a></li><li><a href="/studyblog.github.io/Components/static/LuckyRolling.html" class="sidebar-link">幸运大转盘</a></li><li><a href="/studyblog.github.io/Components/static/Pinterest.html" class="sidebar-link">瀑布流</a></li><li><a href="/studyblog.github.io/Components/static/Icon.html" class="sidebar-link">图标</a></li><li><a href="/studyblog.github.io/Components/static/Button.html" class="sidebar-link">光亮按钮</a></li><li><a href="/studyblog.github.io/Components/static/Message.html" class="sidebar-link">信息提醒框</a></li><li><a href="/studyblog.github.io/Components/static/MagnifyingGlass.html" class="sidebar-link">放大镜效果</a></li><li><a href="/studyblog.github.io/Components/static/SlideVerify.html" class="sidebar-link">滑块验证</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/studyblog.github.io/Components/vue/base.html" aria-current="page" class="active sidebar-link">Vue基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue" class="sidebar-link">Vue</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#axios的方法和请求响应数据结构" class="sidebar-link">axios的方法和请求响应数据结构</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vuex状态管理" class="sidebar-link">Vuex状态管理</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue中router的钩子函数" class="sidebar-link">VUE中router的钩子函数</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#es6的基本知识" class="sidebar-link">ES6的基本知识</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue-store存储commit和dispatch" class="sidebar-link">vue store存储commit和dispatch</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue-路由导航" class="sidebar-link">vue  路由导航</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue中computed和method-区别" class="sidebar-link">vue中computed和method 区别</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#跨域解决方式" class="sidebar-link">跨域解决方式</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#权限控制" class="sidebar-link">权限控制</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue常用修饰符和应用场景" class="sidebar-link">Vue常用修饰符和应用场景</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#nexttick" class="sidebar-link">NextTick</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue双向绑定" class="sidebar-link">Vue双向绑定</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue组件通信方案" class="sidebar-link">Vue组件通信方案</a></li><li class="sidebar-sub-header"><a href="/studyblog.github.io/Components/vue/base.html#vue中给对象添加新属性时-界面不刷新的问题" class="sidebar-link">Vue中给对象添加新属性时，界面不刷新的问题</a></li></ul></li><li><a href="/studyblog.github.io/Components/vue/permissionControl.html" class="sidebar-link">前端权限控制</a></li><li><a href="/studyblog.github.io/Components/vue/directive.html" class="sidebar-link">Vue自定义指令</a></li><li><a href="/studyblog.github.io/Components/vue/template.html" class="sidebar-link">Ajax失败重连&amp;Fn柯里化&amp;Render</a></li><li><a href="/studyblog.github.io/Components/vue/vuex.html" class="sidebar-link">Vuex状态管理</a></li><li><a href="/studyblog.github.io/Components/vue/FirstLoad.html" class="sidebar-link">首屏加载优化</a></li><li><a href="/studyblog.github.io/Components/vue/mixin.html" class="sidebar-link">VueMixin混入</a></li><li><a href="/studyblog.github.io/Components/vue/innerComponents.html" class="sidebar-link">Vue内置组件</a></li><li><a href="/studyblog.github.io/Components/vue/Vuethree.html" class="sidebar-link">Vue3.0</a></li><li><a href="/studyblog.github.io/Components/vue/Axios.html" class="sidebar-link">Axios</a></li><li><a href="/studyblog.github.io/Components/vue/code.html" class="sidebar-link">Vue源码分析</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WebPack篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>业务功能篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NodeJS篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web性能提升篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MiniPrograme篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java基础篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络知识篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法篇</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h2> <blockquote><p><strong>生命周期钩子的this上下文指向调用它的vue实例</strong></p></blockquote> <p>不能再生命周期选项property或回调上使用箭头函数如</p> <p>created: () =&gt; console.log(this.a)   或</p> <p>vm.$watch('a', newValue =&gt; this.myMethod())。**因为箭头函数并没有 <code>this</code>，<code>this</code> 会作为变量一直向上级词法作用域查找，直至找到为止，**经常导致 Uncaught TypeError: Cannot read property of undefined 或 Uncaught TypeError: this.myMethod is not a function 之类的错误</p> <p><strong>beforecreate：</strong></p> <p><strong>created：</strong></p> <p><strong>beforemounted:</strong></p> <p><strong>mounted:</strong></p> <p><strong>beforeupdated:</strong></p> <p><strong>update:</strong></p> <p><strong>beforedestroyed:</strong></p> <p><strong>destroyed:</strong></p> <h3 id="_1-什么是vue生命周期"><a href="#_1-什么是vue生命周期" class="header-anchor">#</a> （1）什么是vue生命周期?</h3> <p>Vue 实例从创建到销毁的过程，就是生命周期。也就是从开始创建、初始化数据、编译模板、挂载Dom→渲染、更新→渲染、卸载等一系列过程，我们称这是 Vue 的生命周期。</p> <h3 id="_2-vue生命周期的作用是什么"><a href="#_2-vue生命周期的作用是什么" class="header-anchor">#</a> （2）vue生命周期的作用是什么?</h3> <p>Vue生命周期中有多个事件钩子，让我们在控制整个Vue实例过程时更容易形成好的逻辑。</p> <h3 id="_3-vue生命周期总共有几个阶段"><a href="#_3-vue生命周期总共有几个阶段" class="header-anchor">#</a> （3）vue生命周期总共有几个阶段?</h3> <p>可以总共分为8个阶段：创建前/后, 载入前/后,更新前/后,销毁前/后。</p> <h3 id="_4-第一次页面加载会触发哪几个钩子"><a href="#_4-第一次页面加载会触发哪几个钩子" class="header-anchor">#</a> （4）第一次页面加载会触发哪几个钩子?</h3> <p>第一次页面加载时会触发 beforeCreate, created, beforeMount, mounted 这几个钩子</p> <h3 id="_5-dom-渲染在-哪个周期中就已经完成"><a href="#_5-dom-渲染在-哪个周期中就已经完成" class="header-anchor">#</a> （5）DOM 渲染在 哪个周期中就已经完成?</h3> <p>DOM 渲染在 mounted 中就已经完成了。</p> <h3 id="_6-简单描述每个周期具体适合哪些场景"><a href="#_6-简单描述每个周期具体适合哪些场景" class="header-anchor">#</a> （6）简单描述每个周期具体适合哪些场景?</h3> <p>生命周期钩子的一些使用方法：</p> <p>beforecreate : 可以在此阶段加loading事件，在加载实例时触发；</p> <p>created : 初始化完成时的事件写在这里，如在这结束loading事件，异步请求也适宜在这里调用；</p> <p>mounted : 挂载元素，获取到DOM节点；</p> <p>updated : 如果对数据统一处理，在这里写上相应函数；</p> <p>beforeDestroy : 可以做一个确认停止事件的确认框；</p> <p>nextTick : 更新数据后立即操作dom；</p> <h1 id="vue进阶-一"><a href="#vue进阶-一" class="header-anchor">#</a> VUE进阶(一)</h1> <div class="language-vue extra-class"><pre class="language-vue"><code>//添加一个请求拦截器
axios.interceptors.request.use(function (config){
	return config;
},function (error) {
	return Promise.reject(error);
});

//添加一个响应拦截器
axios.interceptors.responese.use(function (responese){
	return responese;
},function (error){
	return 	Promise.reject(error);
})

//移除一个拦截器
var = myInterceptor = axios.interceptors.request.use(function (){ .... });
axios.interceptors.request.eject(myInterceptor);

//给自定义的axios实例添加拦截器
var instance = axios.create();
instance.interceptors.request.use(function() { ....});


</code></pre></div><h2 id="axios的方法和请求响应数据结构"><a href="#axios的方法和请求响应数据结构" class="header-anchor">#</a> axios的方法和请求响应数据结构</h2> <h3 id="请求方法别名"><a href="#请求方法别名" class="header-anchor">#</a> 请求方法别名</h3> <p>​	get、delete、head、post、put、patch</p> <h3 id="相应数据结构"><a href="#相应数据结构" class="header-anchor">#</a> 相应数据结构</h3> <p>​	data:{},</p> <p>​	status:200?</p> <p>​	statusText: 'ok'</p> <p>​	headers: {}</p> <p>​	config: {}</p> <h2 id="vuex状态管理"><a href="#vuex状态管理" class="header-anchor">#</a> Vuex状态管理</h2> <p>**state：**驱动应用的数据源。</p> <p>**view：**以声明的方式将state映射到视图</p> <p>**actions：**响应在vue上的用户输入导致的状态变化。</p> <p>state会显示到view，用户根据view上的内容进行操作，触发actions然后在影响state的变化。</p> <h2 id="vue中router的钩子函数"><a href="#vue中router的钩子函数" class="header-anchor">#</a> VUE中router的钩子函数</h2> <p><strong>beforeEach</strong>：在跳转之前执行</p> <p><strong>to:router</strong> 即将进入路由对象</p> <p><strong>from</strong>:当前导航即将离开路由</p> <p><strong>next</strong>:Function，进行管道中的钩子，如果执行完了，如果执行完了，当前导航的状态为confirmed(确认的)，false，即终止导航。</p> <div class="language-vue extra-class"><pre class="language-vue"><code>router.beforeEach((to,from,next)=&gt;{

​	let token = router.app.$storage.fetch(&quot;token&quot;);

​	let needAuth = to.matched.some(iten=&gt;item.meta.login);

​	if(!token&amp;&amp; needAuth) return next({

​		path: &quot;/login&quot;;

​	next();

})

})
</code></pre></div><p>**afterEach：**在跳转之后判断</p> <p><strong>aftereach</strong>：不用传next（）函数。</p> <div class="language-vue extra-class"><pre class="language-vue"><code>const = router = new VueRouter({

​	routes: [

​	{

​	path: '/login',

​	component: Login,

​	beforeEnter:(to,from,next)=&gt;{

​		//.....

},

​	beforeLeave:(to,from,next)=&gt;{

​		//....

}

}

]})
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>var routes = [

{

​	path:'/home',

​	component: 'home',

​	name: 'home'

}

]
</code></pre></div><p>beforeRouteLeave(to, from, next) {
next()
},
beforeRouteEnter(to, from, next) {
next()
},
beforeRouteUpdate(to, from, next) {
next()
},</p> <h2 id="es6的基本知识"><a href="#es6的基本知识" class="header-anchor">#</a> ES6的基本知识</h2> <p>​	<strong>let</strong>：(代码块)块级作用域，不存在变量提升变量声明后必须 使用，在相同作用域内，不允许重复声明。</p> <p><strong>const</strong>:声明一个只读常量，一旦声明不发改变，声明后必须初始化一个值，const的作用域与let相同，只在块级作用域下有效，不可重复声明，没有变量提升。</p> <p><strong>var</strong>：存在变量提升，作用域为该语句所在的函数内。</p> <h2 id="promise"><a href="#promise" class="header-anchor">#</a> Promise</h2> <p><strong>promise</strong>对象是一个构造函数，用来生成Promise实例。</p> <p><strong>promise</strong>对象代表一个异步操作，有三种状态：<strong>pending</strong>(进行中)，<strong>fulfiled</strong>(已成功)、<strong>rejected</strong>(已失败)</p> <p><strong>1.Promise.all</strong>方法用于将多个Promise实例，包装成一个新的Promise实例。</p> <p>var p =Promise.all([p1,p2,p3]);</p> <p>Promise.all方法接受一个数组作为参数，p1,p2,p3都是Promise实例,如果不是就会先调用下面讲到的<code>Promise.resolve</code>方法，将参数转为 Promise 实例，再进一步处理。</p> <p>P的状态由p1,p2,p3决定：</p> <p>​	1）只有p1、p2、p3的状态都变成fulfilled，p的状态才会变成fulfilled，此时p1、p2、p3的返回值组成一个数组，传递给p的回调函数。</p> <p>2）只要p1、p2、p3之中有一个被rejected，p的状态就变成rejected，此时第一个被reject的实例的返回值，会传递给p的回调函数。</p> <p><strong>2</strong>.<strong>Promise.race()</strong>:将多个Promise实例，包装成一个新的Promise实例。</p> <p>​		 var p = Promise.race([p1, p2, p3]);</p> <p>上面代码中，只要<code>p1</code>、<code>p2</code>、<code>p3</code>之中有一个实例率先改变状态，<code>p</code>的状态就跟着改变。那个率先改变的 Promise 实例的返回值，就传递给<code>p</code>的回调函数。</p> <p><strong>3.Promise.resolve()</strong>:将现有对象转换为Promise对象。</p> <h2 id="vue-store存储commit和dispatch"><a href="#vue-store存储commit和dispatch" class="header-anchor">#</a> vue store存储commit和dispatch</h2> <p>this.$store.dispatch('toShowLoginDiaglog',false)</p> <p>this.$store.commit('toShowLoginDoalog',false)</p> <p><strong>区别</strong>：dispatch：含有异步操作  写法：“<code>this.$store.dispatch('action方法名',值)</code></p> <p>​			commit:同步操作，this.$store.commit('mutations方法名',值)</p> <h2 id="vue-路由导航"><a href="#vue-路由导航" class="header-anchor">#</a> vue  路由导航</h2> <p><strong>编程式</strong>：	<strong>router.push(location)</strong>,向history添加新纪录，可通过浏览器的前进后退按钮进行浏览器页面跳转。</p> <p><strong>声明式</strong>：<code>&lt;router-link :to=&quot;&quot;&gt;&lt;/router-link&gt;</code>等同于router.push(location)</p> <p><strong>router.replace()</strong>:不会在history留下记录，即使点击返回按钮也不会回到这个页面，替换当前记录。</p> <h2 id="vue中computed和method-区别"><a href="#vue中computed和method-区别" class="header-anchor">#</a> vue中computed和method 区别</h2> <p>computed是属性调用，而method是函数调用;</p> <p>computed带有缓存功能，而metho</p> <h2 id="跨域解决方式"><a href="#跨域解决方式" class="header-anchor">#</a> 跨域解决方式</h2> <h3 id="cors"><a href="#cors" class="header-anchor">#</a> CORS</h3> <p>​</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span> <span class="token string">'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'PUT, POST, GET, DELETE, OPTIONS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//方案一</span>
amodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8084</span><span class="token punctuation">,</span>
        <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">// vue项目启动时自动打开浏览器</span>
        <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// '/api'是代理标识，用于告诉node，url前面是/api的就是使用代理的</span>
                <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://xxx.xxx.xx.xx:8080&quot;</span><span class="token punctuation">,</span> <span class="token comment">//目标地址，一般是指后台服务器地址</span>
                <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//是否跨域</span>
                <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// pathRewrite 的作用是把实际Request Url中的'/api'用&quot;&quot;代替</span>
                    <span class="token string-property property">'^/api'</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span> 
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//通过axios发送请求中，配置请求的根路径</span>

axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'/api'</span>

<span class="token comment">//方案二</span>
<span class="token comment">//此外，还可通过服务端实现代理请求转发</span>
<span class="token comment">//以express框架为例</span>

<span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:4000'</span><span class="token punctuation">,</span> <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">false</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> app
<span class="token comment">//方案三</span>
<span class="token comment">//通过配置nginx实现代理</span>
server <span class="token punctuation">{</span>
    listen    <span class="token number">80</span><span class="token punctuation">;</span>
    # server_name www<span class="token punctuation">.</span>josephxia<span class="token punctuation">.</span>com<span class="token punctuation">;</span>
    location <span class="token operator">/</span> <span class="token punctuation">{</span>
        root  <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>html<span class="token punctuation">;</span>
        index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        try_files $uri $uri<span class="token operator">/</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">/</span>api <span class="token punctuation">{</span>
        proxy_pass  http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">;</span>
        proxy_redirect   off<span class="token punctuation">;</span>
        proxy_set_header  Host       $host<span class="token punctuation">;</span>
        proxy_set_header  <span class="token constant">X</span><span class="token operator">-</span>Real<span class="token operator">-</span><span class="token constant">IP</span>     $remote_addr<span class="token punctuation">;</span>
        proxy_set_header  <span class="token constant">X</span><span class="token operator">-</span>Forwarded<span class="token operator">-</span>For  $proxy_add_x_forwarded_for<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> JSONP</h3> <h2 id="权限控制"><a href="#权限控制" class="header-anchor">#</a> 权限控制</h2> <p>前端权限控制可以分为四个方面：</p> <ul><li>接口权限</li> <li>按钮权限</li> <li>菜单权限</li> <li>路由权限</li></ul> <h3 id="接口权限"><a href="#接口权限" class="header-anchor">#</a> 接口权限</h3> <p>接口权限目前一般采用<code>jwt</code>的形式来验证，没有通过的话一般返回<code>401</code>，跳转到登录页面重新进行登录</p> <p>登录完拿到<code>token</code>，将<code>token</code>存起来，通过<code>axios</code>请求拦截器进行拦截，每次请求的时候头部携带<code>token</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>response<span class="token punctuation">}</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">40099</span> <span class="token operator">||</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">40098</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//token过期或者错误</span>
        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="路由权限控制"><a href="#路由权限控制" class="header-anchor">#</a> 路由权限控制</h3> <p><strong>方案一</strong></p> <p>初始化即挂载全部路由，并且在路由上标记相应的权限信息，每次路由跳转前做校验</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> routerMap <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/permission'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'/permission/index'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">alwaysShow</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// will always show the root menu</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'permission'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'lock'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token string">'editor'</span><span class="token punctuation">]</span> <span class="token comment">// you can set roles in root nav</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'page'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/permission/page'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'pagePermission'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'pagePermission'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'admin'</span><span class="token punctuation">]</span> <span class="token comment">// or you can only set roles in sub nav</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'directive'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/permission/directive'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'directivePermission'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'directivePermission'</span>
        <span class="token comment">// if do not set roles, means: this page does not require permission</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="菜单权限"><a href="#菜单权限" class="header-anchor">#</a> 菜单权限</h3> <p>菜单权限可以理解成将页面与理由进行解耦</p> <h4 id="方案一"><a href="#方案一" class="header-anchor">#</a> 方案一</h4> <p>菜单与路由分离，菜单由后端返回</p> <p>前端定义路由信息</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;@/pages/Login.vue&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="按钮权限"><a href="#按钮权限" class="header-anchor">#</a> 按钮权限</h3> <h4 id="方案一-2"><a href="#方案一-2" class="header-anchor">#</a> 方案一</h4> <p>按钮权限也可以用<code>v-if</code>判断</p> <p>但是如果页面过多，每个页面页面都要获取用户权限<code>role</code>和路由表里的<code>meta.btnPermissions</code>，然后再做判断</p> <p>这种方式就不展开举例了</p> <p>自定义权限鉴定指令</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">/**权限指令**/</span>
<span class="token keyword">const</span> has <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'has'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取页面按钮权限</span>
        <span class="token keyword">let</span> btnPermissionsArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 如果指令传值，获取指令参数，根据指令参数和当前登录人按钮权限做比较。</span>
            btnPermissionsArr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">// 否则获取路由中的参数，根据路由的btnPermissionsArr和当前登录人按钮权限做比较。</span>
            btnPermissionsArr <span class="token operator">=</span> vnode<span class="token punctuation">.</span>context<span class="token punctuation">.</span>$route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>btnPermissions<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">$_has</span><span class="token punctuation">(</span>btnPermissionsArr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            el<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 权限检查方法</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$_has</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> isExist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">// 获取用户按钮权限</span>
    <span class="token keyword">let</span> btnPermissionsStr <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&quot;btnPermissions&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>btnPermissionsStr <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> btnPermissionsStr <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>btnPermissionsStr<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        isExist <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> isExist<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>has<span class="token punctuation">}</span>
</code></pre></div><h2 id="vue常用修饰符和应用场景"><a href="#vue常用修饰符和应用场景" class="header-anchor">#</a> Vue常用修饰符和应用场景</h2> <p><code>vue</code>中修饰符分为以下五种：</p> <ul><li>表单修饰符</li> <li>事件修饰符</li> <li>鼠标按键修饰符</li> <li>键值修饰符</li> <li>v-bind修饰符</li></ul> <h3 id="二、修饰符的作用"><a href="#二、修饰符的作用" class="header-anchor">#</a> 二、修饰符的作用</h3> <h4 id="表单修饰符"><a href="#表单修饰符" class="header-anchor">#</a> 表单修饰符</h4> <p>在我们填写表单的时候用得最多的是<code>input</code>标签，指令用得最多的是<code>v-model</code></p> <p>关于表单的修饰符有如下：</p> <ul><li>lazy</li> <li>trim</li> <li>number</li></ul> <h4 id="lazy"><a href="#lazy" class="header-anchor">#</a> lazy</h4> <p>在我们填完信息，光标离开标签的时候，才会将值赋予给<code>value</code>，也就是在<code>change</code>事件之后再进行信息同步</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>lazy<span class="token operator">=</span><span class="token string">&quot;value&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</code></pre></div><h4 id="trim"><a href="#trim" class="header-anchor">#</a> trim</h4> <p>自动过滤用户输入的首空格字符，而中间的空格不会过滤</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;value&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h4 id="number"><a href="#number" class="header-anchor">#</a> number</h4> <p>自动将用户的输入值转为数值类型，但如果这个值无法被<code>parseFloat</code>解析，则会返回原来的值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;age&quot;</span> type<span class="token operator">=</span><span class="token string">&quot;number&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="事件修饰符"><a href="#事件修饰符" class="header-anchor">#</a> 事件修饰符</h3> <p>事件修饰符是对事件捕获以及目标进行了处理，有如下修饰符：</p> <ul><li>stop</li> <li>prevent</li> <li>self</li> <li>once</li> <li>capture</li> <li>passive</li> <li>native</li></ul> <h4 id="stop"><a href="#stop" class="header-anchor">#</a> stop</h4> <p>阻止了事件冒泡，相当于调用了<code>event.stopPropagation</code>方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div @click<span class="token operator">=</span><span class="token string">&quot;shout(2)&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>stop<span class="token operator">=</span><span class="token string">&quot;shout(1)&quot;</span><span class="token operator">&gt;</span>ok<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token comment">//只输出1</span>
</code></pre></div><h4 id="prevent"><a href="#prevent" class="header-anchor">#</a> prevent</h4> <p>阻止了事件的默认行为，相当于调用了<code>event.preventDefault</code>方法</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>form v<span class="token operator">-</span>on<span class="token operator">:</span>submit<span class="token punctuation">.</span>prevent<span class="token operator">=</span><span class="token string">&quot;onSubmit&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><h4 id="self"><a href="#self" class="header-anchor">#</a> self</h4> <p>只当在 <code>event.target</code> 是当前元素自身时触发处理函数</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div v<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token punctuation">.</span>self<span class="token operator">=</span><span class="token string">&quot;doThat&quot;</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><h4 id="once"><a href="#once" class="header-anchor">#</a> once</h4> <p>绑定了事件以后只能触发一次，第二次就不会触发</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>once<span class="token operator">=</span><span class="token string">&quot;shout(1)&quot;</span><span class="token operator">&gt;</span>ok<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><h4 id="capture"><a href="#capture" class="header-anchor">#</a> capture</h4> <p>使事件触发从包含这个元素的顶层开始往下触发</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div @click<span class="token punctuation">.</span>capture<span class="token operator">=</span><span class="token string">&quot;shout(1)&quot;</span><span class="token operator">&gt;</span>
    obj1
<span class="token operator">&lt;</span>div @click<span class="token punctuation">.</span>capture<span class="token operator">=</span><span class="token string">&quot;shout(2)&quot;</span><span class="token operator">&gt;</span>
    obj2
<span class="token operator">&lt;</span>div @click<span class="token operator">=</span><span class="token string">&quot;shout(3)&quot;</span><span class="token operator">&gt;</span>
    obj3
<span class="token operator">&lt;</span>div @click<span class="token operator">=</span><span class="token string">&quot;shout(4)&quot;</span><span class="token operator">&gt;</span>
    obj4
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token comment">// 输出结构: 1 2 4 3 </span>
</code></pre></div><h4 id="passive"><a href="#passive" class="header-anchor">#</a> passive</h4> <p>在移动端，当我们在监听元素滚动事件的时候，会一直触发<code>onscroll</code>事件会让我们的网页变卡，因此我们使用这个修饰符的时候，相当于给<code>onscroll</code>事件整了一个<code>.lazy</code>修饰符</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token function">滚动事件的默认行为</span> <span class="token punctuation">(</span>即滚动行为<span class="token punctuation">)</span> 将会立即触发 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 而不会等待 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">onScroll</span><span class="token template-punctuation string">`</span></span> 完成  <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 这其中包含 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">event.preventDefault()</span><span class="token template-punctuation string">`</span></span> 的情况 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div v<span class="token operator">-</span>on<span class="token operator">:</span>scroll<span class="token punctuation">.</span>passive<span class="token operator">=</span><span class="token string">&quot;onScroll&quot;</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><h4 id="native"><a href="#native" class="header-anchor">#</a> native</h4> <p>让组件变成像<code>html</code>内置标签那样监听根元素的原生事件，否则组件上使用 <code>v-on</code> 只会监听自定义事件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>my<span class="token operator">-</span>component v<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token punctuation">.</span>native<span class="token operator">=</span><span class="token string">&quot;doSomething&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>component<span class="token operator">&gt;</span>
</code></pre></div><h3 id="鼠标按钮修饰符"><a href="#鼠标按钮修饰符" class="header-anchor">#</a> 鼠标按钮修饰符</h3> <p>鼠标按钮修饰符针对的就是左键、右键、中键点击，有如下：</p> <ul><li>left 左键点击</li> <li>right 右键点击</li> <li>middle 中键点击</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>left<span class="token operator">=</span><span class="token string">&quot;shout(1)&quot;</span><span class="token operator">&gt;</span>ok<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>right<span class="token operator">=</span><span class="token string">&quot;shout(1)&quot;</span><span class="token operator">&gt;</span>ok<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>button @click<span class="token punctuation">.</span>middle<span class="token operator">=</span><span class="token string">&quot;shout(1)&quot;</span><span class="token operator">&gt;</span>ok<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><p>键盘修饰符是用来修饰键盘事件（<code>onkeyup</code>，<code>onkeydown</code>）的，有如下：</p> <p><code>keyCode</code>存在很多，但<code>vue</code>为我们提供了别名，分为以下两种：</p> <ul><li>普通键（enter、tab、delete、space、esc、up...）</li> <li>系统修饰键（ctrl、alt、meta、shift...）</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 只有按键为keyCode的时候才触发</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> @keyup<span class="token punctuation">.</span>keyCode<span class="token operator">=</span><span class="token string">&quot;shout()&quot;</span><span class="token operator">&gt;</span>
    
<span class="token comment">//还可以通过以下方式自定义一些全局的键盘码别名</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>keyCodes<span class="token punctuation">.</span>f2 <span class="token operator">=</span> <span class="token number">113</span>
</code></pre></div><h3 id="v-bind修饰符"><a href="#v-bind修饰符" class="header-anchor">#</a> v-bind修饰符</h3> <p>v-bind修饰符主要是为属性进行操作，用来分别有如下：</p> <ul><li>async</li> <li>prop</li> <li>camel</li></ul> <h4 id="async"><a href="#async" class="header-anchor">#</a> async</h4> <p>能对<code>props</code>进行一个双向绑定</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//父组件</span>
<span class="token operator">&lt;</span>comp <span class="token operator">:</span>myMessage<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">&gt;</span> 
<span class="token comment">//子组件</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:myMessage'</span><span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//以上这种方法相当于以下的简写</span>
<span class="token comment">//父亲组件</span>
<span class="token operator">&lt;</span>comp <span class="token operator">:</span>myMessage<span class="token operator">=</span><span class="token string">&quot;bar&quot;</span> @update<span class="token operator">:</span>myMessage<span class="token operator">=</span><span class="token string">&quot;func&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">&gt;</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>bar <span class="token operator">=</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//子组件js</span>
<span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:myMessage'</span><span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="nexttick"><a href="#nexttick" class="header-anchor">#</a> NextTick</h2> <p>​		<code>Vue</code> 在更新 <code>DOM</code> 时是异步执行的。当数据发生变化，<code>Vue</code>将开启一个异步更新队列，视图需要等队列中所有数据变化完成之后，再统一进行更新</p> <p><code>$nextTick()</code> 会返回一个 <code>Promise</code> 对象，可以是用<code>async/await</code>完成相同作用的事情</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'修改后的值'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span> <span class="token comment">// =&gt; '原始的值'</span>
<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span> <span class="token comment">// =&gt; '修改后的值'</span>
</code></pre></div><p><strong>小结：</strong></p> <ol><li>把回调函数放入callbacks等待执行</li> <li>将执行函数放到微任务或者宏任务中</li> <li>事件循环到了微任务或者宏任务，执行函数依次执行callbacks中的回调</li></ol> <h2 id="vue双向绑定"><a href="#vue双向绑定" class="header-anchor">#</a> Vue双向绑定</h2> <p>​		Vue示例首先通过complie解析指令，通过解析后初始化视图，同时定义一个函数和watcher，将来对数据变化watcher会调用更新函数，然后更新视图。其次通过observe劫持监听所有属性，当属性发生变化，通知给管家Dep，管家Dep将变化通知给watcher，同时watcher也会添加订阅者，订阅Dep，将来一旦data发生变化，首先会找到对应的Dep，通知所有watcher执行更新函数。</p> <img src="/studyblog.github.io/assets/img/VueBind.d0fc0f4d.jpg"> <h2 id="vue组件通信方案"><a href="#vue组件通信方案" class="header-anchor">#</a> Vue组件通信方案</h2> <p>整理<code>vue</code>中8种常规的通信方案</p> <ol><li>通过 props 传递</li> <li>通过 $emit 触发自定义事件</li> <li>使用 ref</li> <li>EventBus</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 创建一个中央时间总线类  </span>
<span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token punctuation">{</span>  
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">// 存放事件的名字  </span>
  <span class="token punctuation">}</span>  
  <span class="token function">$on</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
    <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token punctuation">}</span>  
  <span class="token function">$emit</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
      <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  

<span class="token comment">// main.js  </span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 将$bus挂载到vue实例的原型上  </span>
<span class="token comment">// 另一种方式  </span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Vue已经实现了Bus的功能  </span>
<span class="token comment">//Children1.vue</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>  
<span class="token comment">//Children2.vue</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">)</span> 
</code></pre></div><ol><li>$parent 或$root</li></ol> <h4 id="parent-或-root"><a href="#parent-或-root" class="header-anchor">#</a> $parent 或$ root</h4> <ul><li>通过共同祖辈<code>$parent</code>或者<code>$root</code>搭建通信侨联</li></ul> <p>兄弟组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">)</span>
</code></pre></div><p>另一个兄弟组件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">)</span>
</code></pre></div><ol><li>attrs 与 listeners</li></ol> <h3 id="attrs-与-listeners"><a href="#attrs-与-listeners" class="header-anchor">#</a> $attrs 与$ listeners</h3> <ul><li>适用场景：祖先传递数据给子孙</li> <li>设置批量向下传属性<code>$attrs</code>和 <code>$listeners</code></li> <li>包含了父级作用域中不作为 <code>prop</code> 被识别 (且获取) 的特性绑定 ( class 和 style 除外)。</li> <li>可以通过 <code>v-bind=&quot;$attrs&quot;</code> 传⼊内部组件</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// child：并未在props中声明foo  </span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>$attrs<span class="token punctuation">.</span>foo<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  

<span class="token comment">// parent  </span>
<span class="token operator">&lt;</span>HelloWorld foo<span class="token operator">=</span><span class="token string">&quot;foo&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>  

<span class="token comment">// 给Grandson隔代传值，communication/index.vue  </span>
<span class="token operator">&lt;</span>Child2 msg<span class="token operator">=</span><span class="token string">&quot;lalala&quot;</span> @some<span class="token operator">-</span>event<span class="token operator">=</span><span class="token string">&quot;onSomeEvent&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Child2<span class="token operator">&gt;</span>  

<span class="token comment">// Child2做展开  </span>
<span class="token operator">&lt;</span>Grandson v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">&quot;$attrs&quot;</span> v<span class="token operator">-</span>on<span class="token operator">=</span><span class="token string">&quot;$listeners&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Grandson<span class="token operator">&gt;</span>  

<span class="token comment">// Grandson使⽤  </span>
<span class="token operator">&lt;</span>div @click<span class="token operator">=</span><span class="token string">&quot;$emit('some-event', 'msg from grandson')&quot;</span><span class="token operator">&gt;</span>  
<span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  
</code></pre></div><ol><li>Provide 与 Inject</li></ol> <ul><li>在祖先组件定义<code>provide</code>属性，返回传递的值</li> <li>在后代组件通过<code>inject</code>接收组件传递过来的值</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
    <span class="token keyword">return</span> <span class="token punctuation">{</span>  
        <span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token string">'foo'</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>  

<span class="token literal-property property">inject</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span> <span class="token comment">// 获取到祖先组件传递过来的值  </span>
</code></pre></div><ol><li>Vuex</li></ol> <p>适用场景: 复杂关系的组件数据传递</p> <p>Vuex作用相当于一个用来存储共享变量的容器</p> <ol><li><code>state</code>用来存放共享变量的地方</li> <li><code>getter</code>，可以增加一个<code>getter</code>派生状态，(相当于<code>store</code>中的计算属性），用来获得共享变量的值</li> <li><code>mutations</code>用来存放修改<code>state</code>的方法。</li> <li><code>actions</code>也是用来存放修改state的方法，不过<code>action</code>是在<code>mutations</code>的基础上进行。常用来做一些异步操作</li></ol> <ul><li>父子关系的组件数据传递选择 <code>props</code> 与 <code>$emit</code>进行传递，也可选择<code>ref</code></li> <li>兄弟关系的组件数据传递可选择<code>$bus</code>，其次可以选择<code>$parent</code>进行传递</li> <li>祖先与后代组件数据传递可选择<code>attrs</code>与<code>listeners</code>或者 <code>Provide</code>与 <code>Inject</code></li> <li>复杂关系的组件数据传递可以通过<code>vuex</code>存放共享的变量</li></ul> <h2 id="vue中给对象添加新属性时-界面不刷新的问题"><a href="#vue中给对象添加新属性时-界面不刷新的问题" class="header-anchor">#</a> Vue中给对象添加新属性时，界面不刷新的问题</h2> <h4 id="三、解决方案"><a href="#三、解决方案" class="header-anchor">#</a> 三、解决方案</h4> <p><code>Vue</code> 不允许在已经创建的实例上动态添加新的响应式属性</p> <p>若想实现数据与视图同步更新，可采取下面三种解决方案：</p> <ul><li>Vue.set()</li> <li>Object.assign()</li> <li>$forcecUpdated()</li></ul> <h3 id="vue-set"><a href="#vue-set" class="header-anchor">#</a> Vue.set()</h3> <p>Vue.set( target, propertyName/index, value )</p> <p>参数</p> <ul><li><code>{Object | Array} target</code></li> <li><code>{string | number} propertyName/index</code></li> <li><code>{any} value</code></li></ul> <p>返回值：设置的值</p> <p>通过<code>Vue.set</code>向响应式对象中添加一个<code>property</code>，并确保这个新 <code>property</code>同样是响应式的，且触发视图更新</p> <h3 id="object-assign"><a href="#object-assign" class="header-anchor">#</a> Object.assign()</h3> <p>直接使用<code>Object.assign()</code>添加到对象的新属性不会触发更新</p> <p>应创建一个新的对象，合并原对象和混入对象的属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>someObject <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>someObject<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">newProperty1</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">newProperty2</span><span class="token operator">:</span><span class="token number">2</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="forceupdate"><a href="#forceupdate" class="header-anchor">#</a> $forceUpdate</h3> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <ul><li>如果为对象添加少量的新属性，可以直接采用<code>Vue.set()</code></li> <li>如果需要为新对象添加大量的新属性，则通过<code>Object.assign()</code>创建新对象</li> <li>如果你实在不知道怎么操作时，可采取<code>$forceUpdate()</code>进行强制刷新 (不建议)</li></ul> <p>PS：<code>vue3</code>是用过<code>proxy</code>实现数据响应式的，直接动态添加新属性仍可以实现数据响应式</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/studyblog.github.io/Components/javascript/fileUpload.html" class="prev">
        大文件分块上传
      </a></span> <span class="next"><a href="/studyblog.github.io/Components/vue/permissionControl.html">
        前端权限控制
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎你的关注 
    </div> <div class="operation" style="right:90px;bottom:40px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:none;" data-v-5775ee02></i></div> <canvas id="banniang" width="240" height="352" class="live2d" style="right:-45px;bottom:-95px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div></div></div>
    <script src="/studyblog.github.io/assets/js/app.f0e12a78.js" defer></script><script src="/studyblog.github.io/assets/js/40.d9be3eca.js" defer></script><script src="/studyblog.github.io/assets/js/46.ca6509d7.js" defer></script>
  </body>
</html>
