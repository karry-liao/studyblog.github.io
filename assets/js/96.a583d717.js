(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{867:function(t,a,s){"use strict";s.r(a);var e=s(16),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"初识-react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初识-react"}},[t._v("#")]),t._v(" 初识 React")]),t._v(" "),a("p",[t._v("​ 何为 React，React 用于构建用户界面的 javascript 库，")]),t._v(" "),a("h3",{attrs:{id:"特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[t._v("#")]),t._v(" 特性：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("JSX 语法")])]),t._v(" "),a("li",[a("p",[t._v("单项数据绑定")])]),t._v(" "),a("li",[a("p",[t._v("虚拟 DOM")])]),t._v(" "),a("li",[a("p",[t._v("声明式编程")])]),t._v(" "),a("li",[a("p",[t._v("Component")]),t._v(" "),a("p",[t._v("何为"),a("strong",[t._v("声明式编程")]),t._v("：此为一种编程范式，关注与要做什么，而不是要怎么做，它表达逻辑而不显式地定义步骤。这意味着我们需要根据逻辑的计算来声明要显示的组件")]),t._v(" "),a("p",[t._v("如实现一个标记的地图：")]),t._v(" "),a("p",[t._v("通过命令式创建地图、创建标记、以及在地图上添加的标记的步骤如下：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建地图")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" map "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"map"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("zoom")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("center")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" lat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lng "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建标记")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" marker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("marker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" lat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lng "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello Marker"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 地图上添加标记")]),t._v("\nmarker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("React")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Map zoom"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" center"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Marker position"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello Marker"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Map"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("声明式编程方式使得 "),a("code",[t._v("React")]),t._v(" 组件很容易使用，最终的代码简单易于维护")])])]),t._v(" "),a("h3",{attrs:{id:"react-component"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-component"}},[t._v("#")]),t._v(" React-Component")]),t._v(" "),a("p",[t._v("​ 在 "),a("code",[t._v("React")]),t._v(" 中，一切皆为组件。通常将应用程序的整个逻辑分解为小的单个部分。 我们将每个单独的部分称为组件")]),t._v(" "),a("p",[t._v("组件可以是一个函数或者是一个类，接受数据输入，处理它并返回在 "),a("code",[t._v("UI")]),t._v(" 中呈现的 "),a("code",[t._v("React")]),t._v(" 元素")]),t._v(" "),a("p",[t._v("函数式组件如下：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Header")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("message style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("backgroundColor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"orange"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("click it"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("类组件（有状态组件）如下：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("animals")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"animals"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("cat "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dog "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"组件的特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件的特点"}},[t._v("#")]),t._v(" 组件的特点：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("可组合：每个组件易于和其它组件一起使用，或者嵌套在另一个组件内部")])]),t._v(" "),a("li",[a("p",[t._v("可重用：每个组件都是具有独立功能的，它可以被使用在多个 UI 场景")])]),t._v(" "),a("li",[a("p",[t._v("可维护：每个小的组件仅仅包含自身的逻辑，更容易被理解和维护")]),t._v(" "),a("h3",{attrs:{id:"react-的优势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-的优势"}},[t._v("#")]),t._v(" React 的优势")]),t._v(" "),a("ul",[a("li",[t._v("高效灵活")]),t._v(" "),a("li",[t._v("声明式的设计，简单使用")]),t._v(" "),a("li",[t._v("组件式开发，提高代码复用率")]),t._v(" "),a("li",[t._v("单向响应的数据流会比双向绑定的更安全，速度更快")])])])]),t._v(" "),a("h2",{attrs:{id:"react-的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-的生命周期"}},[t._v("#")]),t._v(" React 的生命周期")]),t._v(" "),a("p",[t._v("​ 至 React16.4 版本后，React 的生命周期大体可分为三个部分：")]),t._v(" "),a("p",[t._v("创建阶段、更新阶段、卸载阶段")]),t._v(" "),a("h4",{attrs:{id:"创建阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建阶段"}},[t._v("#")]),t._v(" "),a("strong",[t._v("创建阶段:")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("​ **constructor:**自动调用，在内部方法中通过 super 关键字来调用父级组件的 props，通常的操作为初始化 state 状态或者在 this 上挂载方法。")])]),t._v(" "),a("li",[a("p",[t._v("​ **getDerivedStateFromProps：**新增的一个生命周期,是一个静态方法，不能访问到组件实例，执行时机：不论 props 变化还是 state 变化，都会调用，在每次 render 方法前调用，第一个参数为即将更新的 props，第二个参数为上一个状态的 state，比较以前的 props 个 state 来加一些限制条件，防止无用的 state 更新。改方法需要放回一个新的对象作为新的 state 或者返回 null 表示 state 状态不需要更新")])]),t._v(" "),a("li",[a("p",[t._v("​ **render：**类组件必须实现的方法，用于渲染 DOM 结构，可以访问组件 state 与 prop 属性")]),t._v(" "),a("p",[t._v("**Notice:**不要在 render 里面 setState 否则会触发死循环导致内存崩溃。")])]),t._v(" "),a("li",[a("p",[t._v("​ "),a("strong",[t._v("componentDidmount:")])]),t._v(" "),a("p",[t._v("组件挂载到真实 DOM 后执行，在 render 方法之后执行，此方法多用于数据的获取，事件监听等操作。")]),t._v(" "),a("h4",{attrs:{id:"更新阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新阶段"}},[t._v("#")]),t._v(" 更新阶段：")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("getDerivedStateFromProps")]),t._v("：此方法通创建时期一样。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("shouldComponentUpdate")]),t._v("：用于告知组件本身当前的 props 和 state 是否需要重新渲染组件，默认返回 true，执行时机：到新的 props 或者 state 时都会调用，通过返回 true 或者 false 告知组件更新与否，一般情况，不建议在改周期进行深层比较，会影响效率同事也不能调用 setstate 否则会触发无线循环更新。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("render")]),t._v("：同上")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("getSnapshotBeforeUpdate")]),t._v("：在 render 函数后面执行，执行时 DOM 元素还没更新，改方法返回一个 snapshot 值，作为 componentDidUpdate 第三个参数传入")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSnapshotBeforeUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'in getSnapshotBeforeUpdate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'componentDidUpdate 第三个参数'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" snapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("snapshot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//componentDidUpdate 第三个参数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("此方法的目的在于获取组件更新前的一些信息，比如组件的滚动位置之类的，在组件更新后可以根据这些信息恢复一些 UI 视觉上的状态")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("componentDidUpdate")]),t._v("：组件更新结束触发，在该方法中，可以根据前后的"),a("code",[t._v("props")]),t._v("和"),a("code",[t._v("state")]),t._v("的变化做相应的操作，如获取数据，修改"),a("code",[t._v("DOM")]),t._v("样式")]),t._v(" "),a("h4",{attrs:{id:"卸载阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载阶段"}},[t._v("#")]),t._v(" 卸载阶段")])]),t._v(" "),a("li",[a("p",[t._v("用于组件被卸载前，清理一些注册监听时间，或者取消订阅的网络请求等，一旦一个组件示例被卸载，只能重建，不可再次被挂载。")])])]),t._v(" "),a("img",{attrs:{src:"https://static.vue-js.com/66c999c0-d373-11eb-85f6-6fac77c0c9b3.png"}}),t._v(" "),a("p",[t._v("相比于 React16.4 版本之前的生命周期：")]),t._v(" "),a("p",[t._v("移除了 componentWillMount、conponentWillReceiveProps、componentWillUpdate")]),t._v(" "),a("p",[t._v("新增了 getDerivedStateFromProps、getSnapShotBeforeUpdate")]),t._v(" "),a("p",[t._v("但是移除的三个旧版依然存在，但必须在前面加上 UNSAFE_前缀。如"),a("code",[t._v("UNSAFE_componentWillMount")])]),t._v(" "),a("p",[t._v("父子组件的挂载生命周期函数，可以发现挂载时，子组件的挂载钩子先被触发；卸载时，父组件的卸载钩子先被触发。")]),t._v(" "),a("h2",{attrs:{id:"redux-和-vuex-区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-和-vuex-区别"}},[t._v("#")]),t._v(" Redux 和 Vuex 区别")]),t._v(" "),a("p",[t._v("相同点：")]),t._v(" "),a("ul",[a("li",[t._v("​ state 共享数据")]),t._v(" "),a("li",[t._v("​ 流程一直：定义全局 state，触发，修改 state")]),t._v(" "),a("li",[t._v("​ 原理相似，通过全局注入 store")])]),t._v(" "),a("p",[t._v("不同点：")]),t._v(" "),a("p",[t._v("​ 从实现原理上来讲：")]),t._v(" "),a("ul",[a("li",[t._v("​ Redux 使用的是不可变数据，儿 Vuex 的数据时可变的，Redux 每次都是用新的 state 替换就得 state，而 Vuex 是直接修改")]),t._v(" "),a("li",[t._v("​ Redux 在检测数据变化的时候，是通过 diff 的方式比较，而 Vuex 其实和 Vue 的原理一样，是通过 getter/setter 来比较")])]),t._v(" "),a("p",[t._v("​ 从表现层来讲：")]),t._v(" "),a("ul",[a("li",[t._v("​ Vuex 定义了 state，getter，mutatuion，action 四个对象；Redux 定义了 state，reducer，action")]),t._v(" "),a("li",[t._v("​ Vuex 中的 state 统一存放，方便理解；reduxstate 依赖所有的 reducer 出事之后")]),t._v(" "),a("li",[t._v("​ vuex 有 getter,目的是快捷得到 state；redux 没有这层，react-redux mapStateToProps 参数做了这个工作。")]),t._v(" "),a("li",[t._v("​ vuex 中 mutation 只是单纯赋值(很浅的一层)；redux 中 reducer 只是单纯设置新 state(很浅的一层)。他俩作用类似，但书写方式不同")]),t._v(" "),a("li",[t._v("​ action 中可简单可复杂,简单就直接发送数据对象（{type:xxx, your-data}）,复杂需要调用异步 ajax（依赖 redux-thunk 插件）。")]),t._v(" "),a("li",[t._v("​ vuex 触发方式有两种 commit 同步和 dispatch 异步；redux 同步和异步都使用 dispatch")])]),t._v(" "),a("h2",{attrs:{id:"共同思想"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#共同思想"}},[t._v("#")]),t._v(" 共同思想")]),t._v(" "),a("ul",[a("li",[t._v("单一的数据源")]),t._v(" "),a("li",[t._v("变化可以预测")])]),t._v(" "),a("p",[t._v("本质上 ∶ redux 与 vuex 都是对 mvvm 思想的服务，将数据从视图中抽离的一种方案。")]),t._v(" "),a("h2",{attrs:{id:"redux-中的-connect-有什么作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-中的-connect-有什么作用"}},[t._v("#")]),t._v(" Redux 中的 connect 有什么作用？")]),t._v(" "),a("p",[t._v("​ connect 负责连接 React 和 Redux")]),t._v(" "),a("p",[a("strong",[t._v("获取 state")])]),t._v(" "),a("p",[t._v("​ connect 通过 context 获取 Provider 中的 store，通过 store.getState()获取整个 store tree 上的 state。")]),t._v(" "),a("p",[a("strong",[t._v("包装原组件")])]),t._v(" "),a("p",[t._v("​ 将 state 和 action 通过 props 的方式传入到原组件内部，wrapWithConnect 返回一个 ReactCommponent 对象 Connect，Connect 重新 render 外部传入的原组件 WrappedComponent，并把 connect 中传入的 "),a("code",[t._v("mapStateToProps")]),t._v("，"),a("code",[t._v("mapDispatchToProps")]),t._v("与组件上原有的 props 合并后，通过属性的方式传给 "),a("code",[t._v("WrappedComponent")])]),t._v(" "),a("p",[a("strong",[t._v("监听 store tree 变化")])]),t._v(" "),a("p",[t._v("​ connect 缓存了"),a("code",[t._v("store tree")]),t._v("中 state 的状态，通过当前 state 状态 和变更前 state 状态进行比较，从而确定是否调用 "),a("code",[t._v("this.setState()")]),t._v("方法触发 Connect 及其子组件的重新渲染")]),t._v(" "),a("h2",{attrs:{id:"redux-状态管理和变量挂载在-window中的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-状态管理和变量挂载在-window中的区别"}},[t._v("#")]),t._v(" Redux 状态管理和变量挂载在 window"),a("strong",[t._v("中的区别")])]),t._v(" "),a("p",[t._v("两者都是存储数据以供后期使用。但是 Redux 状态更改可回溯——"),a("code",[t._v("Time travel")]),t._v("，数据多了的时候可以很清晰的知道改动在哪里发生，完整的提供了一套状态管理模式。")])])}),[],!1,null,null,null);a.default=n.exports}}]);