(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{861:function(t,e,l){"use strict";l.r(e);var a=l(16),v=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"前端性能监控"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端性能监控"}},[t._v("#")]),t._v(" 前端性能监控")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("响应速度")]),t._v("：页面初始访问速度 + 交互响应速度")]),t._v(" "),e("li",[e("strong",[t._v("页面稳定性")]),t._v("：页面出错率，如资源加载错误，JS 执行报错")]),t._v(" "),e("li",[e("strong",[t._v("外部服务调用")]),t._v("：网络请求访问速度")])]),t._v(" "),e("h2",{attrs:{id:"性能指标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能指标"}},[t._v("#")]),t._v(" 性能指标")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("FP:首次绘制")]),t._v("First Paint")]),t._v(" "),e("li",[e("strong",[t._v("FCP:首次内容绘制")]),t._v("First Contentful Paint")]),t._v(" "),e("li",[e("strong",[t._v("FMP:首次有效绘制")]),t._v("First Meaningful Paint")]),t._v(" "),e("li",[e("strong",[t._v("TTI:页面交互时间")]),t._v("Time to Interactive")])]),t._v(" "),e("h2",{attrs:{id:"window-performance基础"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#window-performance基础"}},[t._v("#")]),t._v(" window.performance基础")]),t._v(" "),e("p",[e("strong",[t._v("navigation")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("含义")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("connectStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("与服务端建立连接开始时间")]),t._v("，如果是持久连接或者是从缓存中获取资源，则这个值等于"),e("code",[t._v("domainLookupEnd")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("connectEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("与服务端建立连接完成时间")]),t._v("，如果是持久连接或者是从缓存中获取资源，则这个值等于"),e("code",[t._v("domainLookupEnd")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("domComplete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("html文档完全解析完毕的时间节点")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("domContentLoadedEventEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("DOMContentLoaded事件触发的结束时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("domContentLoadedEventStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("DOMContentLoaded事件触发的结开始时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("domInteractive")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("当前网页DOM结构结束解析、开始加载内嵌资源(如js、css)**时，即**Document.readyState变为interactive")]),t._v("的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("domLoading")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回当前"),e("strong",[t._v("网页DOM结构开始解析时")]),t._v("，即"),e("strong",[t._v("Document.readyState变为loading时")]),t._v("的时间戳")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("domainLookupEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("查询DNS结束时间")]),t._v("，如果是持久连接或者是从缓存中获取资源，则这个值等于"),e("code",[t._v("fetchStart")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("domainLookupStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("查询DNS开始时间")]),t._v("，如果是持久连接或者是从缓存中获取资源，则这个值等于"),e("code",[t._v("fetchStart")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fetchStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("如果要使用“GET”请求方法获取新资源，fetchStart返回的是"),e("strong",[t._v("浏览器发起请求到检测缓存前时间")]),t._v("，否则直接返回"),e("strong",[t._v("浏览器请求时间")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("loadEventEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("onload完成时间")]),t._v("，当load事件尚未触发时，它返回零")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("loadEventStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("onload开始时间")]),t._v("，当load事件尚未触发时，它返回零")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("navigationStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("上一个url卸载时间")]),t._v("，如果没有上一个url，则这个值等于"),e("code",[t._v("fetchStart")]),t._v("，在 PerformanceNavigationTiming 中已废弃")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("redirectEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("最后一个HTTP重定向完成时间")]),t._v("，如果没有重定向，或者重定向中的一个不同源，这个值会返回0")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("redirectStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("第一个HTTP重定向开始时间")]),t._v("，如果没有重定向，或者重定向中的一个不同源，这个值会返回0")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("requestStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("浏览器向服务器发出HTTP请求时间")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("responseEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("浏览器从服务器收到（或从本地缓存读取，或从本地资源读取）最后一个字节时间")]),t._v("（如果在此之前HTTP连接已经关闭，则返回关闭时）的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("responseStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("浏览器从服务器收到（或从本地缓存读取）第一个字节时间")]),t._v("。如果传输层在开始请求之后失败并且连接被重开，该属性将会被数制成新的请求的相对应的发起时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("secureConnectionStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回浏览器与服务器开始安全链接的握手时间，如果当前网页不要求安全连接，则返回0")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("unloadEventEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("unload处理完成时间")]),t._v("，如果当前url与上一个url是同源，则返回的值是指上一个页面卸载到这个页面用户代理开始前时间，如果与上一个不同域或者没有上一个url，则返回0")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("unloadEventStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回"),e("strong",[t._v("unload开始处理时间")]),t._v("，如果当前url与上一个url是同源，则返回的值是指上一个页面卸载到这个页面用户代理后时间，如果与上一个不同域或者没有上一个url，则返回0")])])])]),t._v(" "),e("h2",{attrs:{id:"各指标计算方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#各指标计算方式"}},[t._v("#")]),t._v(" 各指标计算方式")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("指标")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("计算方式")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("页面加载总耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("loadEventEnd - startTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指页面完全加载完所用的时间，这时候触发完成了 onload 事件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("DNS解析耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("domainLookupEnd - domainLookupStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指通过域名解析服务（DNS），将指定的域名解析成IP地址所消耗的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("TCP连接耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("connectEnd - connectStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指浏览器和WEB服务器建立TCP/IP连接所用的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("SSL连接耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("location.protocol === 'https:' ? connectEnd - secureConnectionStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("只在 HTTPS 下有效，属于TCP连接耗时的一部分，指安全连接握手耗时")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("网路请求耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("responseStart - requestStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指开始发送请求到服务器返回第一个字节所需要的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("数据传输耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("responseEnd-responseStart")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指服务器端返回第一个字节到最后一个字节所需要的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("DOM解析耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("domContentLoadedEventEnd - responseEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指页面请求完成（responseEnd）后，到整个 DOM 解析完所用的时间，页面的复杂度决定了 DOM 解析耗时")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("资源加载耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("loadEventEnd - domContentLoadedEventEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指 DOM 解析完成后到页面完全加载完所用的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("首包时间")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("responseStart - startTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指从页面请求到浏览器开始接收到数据所用的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("页面渲染耗时")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("loadEventEnd - responseEnd")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("等于页面完全加载时间 - HTML 加载完成时间（见下面指标）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("页面完全加载时间")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("loadEventEnd - startTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指页面完全加载完所用的时间，这时候触发完成了 onload 事件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("白屏时间")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("优先使用最新标准 performance.getEntriesByType('paint')[0].startTime，不支持的话使用 Chrome、IE 提供的 firstPaintTime，chrome.loadTimes().firstPaintTime 或 performance.msFirstPaint，还没有获取，取 domInteractive - startTime但是实际上报取的值是：loadEventEnd - startTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("首次渲染时间，指页面出现第一个文字或图像所花费的时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("页面加载完时间")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("loadEventEnd - startTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指页面完全加载完所用的时间，这时候触发完成了 onload 事件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("HTML加载完时间")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("responseEnd - startTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指页面所有 HTML 加载完成（不包括页面渲染时间），即包括 DNS、TCP、Request 和 Response")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("首次交互时间")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("domInteractive - startTime")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指页面 DOMContentLoaded 事件触发的开始时间，这时候页面可以交互")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("首屏时间")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("有两种方式：第一种通过计算首屏区域内的所有图片加载时间，然后取其最大值；第二种方式：通过 window.MutationObserver 来监听首屏所有元素变化情况，并记录时间，最后取其最大值（会去掉得分相同重复的值），算出的时间需要加上 domInteractive（可交互时间），目前系统采用第二种实现方式，如果第二种取不到，取 domInteractive，但该值会比实际首屏时间要小")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("首屏时间，也称用户完全可交互时间，即整个页面首屏完全渲染出来，用户完全可以交互，一般首屏时间小于页面完全加载时间，该指标值可以衡量页面访问速度")])])])])])}),[],!1,null,null,null);e.default=v.exports}}]);